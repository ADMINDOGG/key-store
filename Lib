-- Tab Icon
        local tabIcon = Instance.new("TextLabel")
        tabIcon.Size = UDim2.new(0, 24, 0, 24)
        tabIcon.Position = UDim2.new(0, 12, 0.5, -12)
        tabIcon.BackgroundTransparency = 1
        tabIcon.Text = tab.Icon
        tabIcon.TextColor3 = Theme.TextDim
        tabIcon.TextSize = 16
        tabIcon.Font = Enum.Font.GothamBold
        tabIcon.TextXAlignment = Enum.TextXAlignment.Center
        tabIcon.TextYAlignment = Enum.TextYAlignment.Center
        tabIcon.ZIndex = 6
        tabIcon.Parent = tabButton
        
        -- Tab Text
        local tabText = Instance.new("TextLabel")
        tabText.Size = UDim2.new(1, -50, 1, 0)
        tabText.Position = UDim2.new(0, 45, 0, 0)
        tabText.BackgroundTransparency = 1
        tabText.Text = tab.Name
        tabText.TextColor3 = Theme.TextDim
        tabText.TextSize = 14
        tabText.Font = Enum.Font.GothamSemibold
        tabText.TextXAlignment = Enum.TextXAlignment.Left
        tabText.TextYAlignment = Enum.TextYAlignment.Center
        tabText.ZIndex = 6
        tabText.Parent = tabButton
        
        -- Tab Indicator
        local tabIndicator = Instance.new("Frame")
        tabIndicator.Size = UDim2.new(0, 4, 0, 0)
        tabIndicator.Position = UDim2.new(0, 0, 0.5, 0)
        tabIndicator.AnchorPoint = Vector2.new(0, 0.5)
        tabIndicator.BackgroundColor3 = Theme.Accent
        tabIndicator.BorderSizePixel = 0
        tabIndicator.ZIndex = 7
        tabIndicator.Parent = tabButton
        
        local indicatorCorner = Instance.new("UICorner")
        indicatorCorner.CornerRadius = UDim.new(0, 2)
        indicatorCorner.Parent = tabIndicator
        
        -- Content Scroll
        local contentScroll = Instance.new("ScrollingFrame")
        contentScroll.Size = UDim2.new(1, -30, 1, -30)
        contentScroll.Position = UDim2.new(0, 15, 0, 15)
        contentScroll.BackgroundTransparency = 1
        contentScroll.BorderSizePixel = 0
        contentScroll.ScrollBarThickness = 6
        contentScroll.ScrollBarImageColor3 = Theme.Accent
        contentScroll.ScrollBarImageTransparency = 0.3
        contentScroll.ZIndex = 4
        contentScroll.Visible = false
        contentScroll.Parent = self.ContentArea
        
        local contentLayout = Instance.new("UIListLayout")
        contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
        contentLayout.Padding = UDim.new(0, 12)
        contentLayout.Parent = contentScroll
        
        tab.TabButton = tabButton
        tab.TabIcon = tabIcon
        tab.TabText = tabText
        tab.TabIndicator = tabIndicator
        tab.ContentScroll = contentScroll
        
        -- Tab hover effects
        tabButton.MouseEnter:Connect(function()
            if self.CurrentTab ~= tab then
                PlaySound(0.1, 2.5)
                CreateTween(tabButton, {BackgroundColor3 = Theme.Hover}, 0.15):Play()
                CreateTween(tabText, {TextColor3 = Theme.Text}, 0.15):Play()
                CreateTween(tabIcon, {TextColor3 = Theme.Accent, Rotation = 15}, 0.15, Enum.EasingStyle.Back):Play()
                CreateTween(tabStroke, {Transparency = 0.4}, 0.15):Play()
                CreateParticleEffect(tabButton, Theme.Accent, 3)
            end
        end)
        
        tabButton.MouseLeave:Connect(function()
            if self.CurrentTab ~= tab then
                CreateTween(tabButton, {BackgroundColor3 = Theme.Background}, 0.15):Play()
                CreateTween(tabText, {TextColor3 = Theme.TextDim}, 0.15):Play()
                CreateTween(tabIcon, {TextColor3 = Theme.TextDim, Rotation = 0}, 0.15):Play()
                CreateTween(tabStroke, {Transparency = 0.8}, 0.15):Play()
            end
        end)
        
        -- Tab selection
        tabButton.MouseButton1Click:Connect(function()
            UltraRippleEffect(tabButton, Theme.Gold)
            CreateTween(tabIcon, {Rotation = tabIcon.Rotation + 360}, 0.5, Enum.EasingStyle.Back):Play()
            self:SelectTab(tab)
        end)
        
        -- Tab methods
        function tab:UpdateCanvasSize()
            local totalHeight = 0
            for _, element in pairs(self.Elements) do
                if element.Parent and element.Visible then
                    totalHeight = totalHeight + element.Size.Y.Offset + 12
                end
            end
            self.ContentScroll.CanvasSize = UDim2.new(0, 0, 0, totalHeight + 30)
        end
        
        function tab:CreateSection(name)
            local sectionContainer = Instance.new("Frame")
            sectionContainer.Size = UDim2.new(1, 0, 0, 40)
            sectionContainer.BackgroundTransparency = 1
            sectionContainer.LayoutOrder = #self.Elements + 1
            sectionContainer.ZIndex = 5
            sectionContainer.Parent = self.ContentScroll
            
            local sectionLine = Instance.new("Frame")
            sectionLine.Size = UDim2.new(0, 4, 0, 25)
            sectionLine.Position = UDim2.new(0, 0, 0, 7)
            sectionLine.BackgroundColor3 = Theme.Accent
            sectionLine.BorderSizePixel = 0
            sectionLine.ZIndex = 6
            sectionLine.Parent = sectionContainer
            
            local lineCorner = Instance.new("UICorner")
            lineCorner.CornerRadius = UDim.new(0, 2)
            lineCorner.Parent = sectionLine
            
            local lineGradient = CreateGradient(sectionLine, {
                ColorSequenceKeypoint.new(0, Theme.Primary),
                ColorSequenceKeypoint.new(1, Theme.Accent)
            }, 90)
            
            local sectionText = Instance.new("TextLabel")
            sectionText.Size = UDim2.new(1, -20, 1, 0)
            sectionText.Position = UDim2.new(0, 20, 0, 0)
            sectionText.BackgroundTransparency = 1
            sectionText.Text = name
            sectionText.TextColor3 = Theme.Text
            sectionText.TextSize = 16
            sectionText.Font = Enum.Font.GothamBold
            sectionText.TextXAlignment = Enum.TextXAlignment.Left
            sectionText.TextYAlignment = Enum.TextYAlignment.Center
            sectionText.ZIndex = 6
            sectionText.Parent = sectionContainer
            
            table.insert(self.Elements, sectionContainer)
            self:UpdateCanvasSize()
            return sectionContainer
        end
        
        function tab:CreateToggle(config)
            config = config or {}
            local toggle = {
                Name = config.Name or "Toggle",
                Default = config.Default or false,
                Callback = config.Callback or function() end,
                Value = config.Default or false
            }
            
            local toggleContainer = Instance.new("Frame")
            toggleContainer.Size = UDim2.new(1, 0, 0, 50)
            toggleContainer.BackgroundColor3 = Theme.Surface
            toggleContainer.BorderSizePixel = 0
            toggleContainer.LayoutOrder = #self.Elements + 1
            toggleContainer.ZIndex = 5
            toggleContainer.Parent = self.ContentScroll
            
            local containerCorner = Instance.new("UICorner")
            containerCorner.CornerRadius = UDim.new(0, 12)
            containerCorner.Parent = toggleContainer
            
            local containerStroke = Instance.new("UIStroke")
            containerStroke.Color = Theme.BorderAccent
            containerStroke.Thickness = 1
            containerStroke.Transparency = 0.7
            containerStroke.Parent = toggleContainer
            
            -- Toggle Switch
            local toggleSwitch = Instance.new("Frame")
            toggleSwitch.Size = UDim2.new(0, 60, 0, 28)
            toggleSwitch.Position = UDim2.new(1, -70, 0.5, -14)
            toggleSwitch.BackgroundColor3 = toggle.Default and Theme.Primary or Theme.Border
            toggleSwitch.BorderSizePixel = 0
            toggleSwitch.ZIndex = 6
            toggleSwitch.Parent = toggleContainer
            
            local switchCorner = Instance.new("UICorner")
            switchCorner.CornerRadius = UDim.new(0, 14)
            switchCorner.Parent = toggleSwitch
            
            local switchStroke = Instance.new("UIStroke")
            switchStroke.Color = toggle.Default and Theme.Accent or Theme.Border
            switchStroke.Thickness = 2
            switchStroke.Transparency = 0.5
            switchStroke.Parent = toggleSwitch
            
            -- Toggle Knob
            local toggleKnob = Instance.new("Frame")
            toggleKnob.Size = UDim2.new(0, 22, 0, 22)
            toggleKnob.Position = toggle.Default and UDim2.new(1, -25, 0.5, -11) or UDim2.new(0, 3, 0.5, -11)
            toggleKnob.BackgroundColor3 = Theme.Text
            toggleKnob.BorderSizePixel = 0
            toggleKnob.ZIndex = 7
            toggleKnob.Parent = toggleSwitch
            
            local knobCorner = Instance.new("UICorner")
            knobCorner.CornerRadius = UDim.new(0, 11)
            knobCorner.Parent = toggleKnob
            
            local knobStroke = Instance.new("UIStroke")
            knobStroke.Color = Theme.Accent
            knobStroke.Thickness = 1
            knobStroke.Transparency = 0.8
            knobStroke.Parent = toggleKnob
            
            -- Toggle Label
            local toggleLabel = Instance.new("TextLabel")
            toggleLabel.Size = UDim2.new(1, -80, 1, 0)
            toggleLabel.Position = UDim2.new(0, 15, 0, 0)
            toggleLabel.BackgroundTransparency = 1
            toggleLabel.Text = toggle.Name
            toggleLabel.TextColor3 = Theme.Text
            toggleLabel.TextSize = 14
            toggleLabel.Font = Enum.Font.GothamSemibold
            toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
            toggleLabel.TextYAlignment = Enum.TextYAlignment.Center
            toggleLabel.ZIndex = 6
            toggleLabel.Parent = toggleContainer
            
            local toggleButton = Instance.new("TextButton")
            toggleButton.Size = UDim2.new(1, 0, 1, 0)
            toggleButton.BackgroundTransparency = 1
            toggleButton.Text = ""
            toggleButton.ZIndex = 8
            toggleButton.Parent = toggleContainer
            
            -- Toggle functionality
            toggleButton.MouseButton1Click:Connect(function()
                toggle.Value = not toggle.Value
                
                PlaySound(0.4, toggle.Value and 1.5 or 0.8)
                UltraRippleEffect(toggleSwitch, toggle.Value and Theme.Gold or Theme.TextDim)
                CreateParticleEffect(toggleSwitch, toggle.Value and Theme.Accent or Theme.Border, 5)
                
                local switchColor = toggle.Value and Theme.Primary or Theme.Border
                local strokeColor = toggle.Value and Theme.Accent or Theme.Border
                local knobPosition = toggle.Value and UDim2.new(1, -25, 0.5, -11) or UDim2.new(0, 3, 0.5, -11)
                
                CreateTween(toggleSwitch, {BackgroundColor3 = switchColor}, 0.3, Enum.EasingStyle.Back):Play()
                CreateTween(switchStroke, {Color = strokeColor}, 0.3):Play()
                CreateTween(toggleKnob, {Position = knobPosition}, 0.3, Enum.EasingStyle.Back):Play()
                
                if toggle.Value then
                    CreateTween(toggleKnob, {Size = UDim2.new(0, 26, 0, 26)}, 0.15):Play()
                    wait(0.1)
                    CreateTween(toggleKnob, {Size = UDim2.new(0, 22, 0, 22)}, 0.15):Play()
                end
                
                toggle.Callback(toggle.Value)
            end)
            
            -- Hover effects
            toggleButton.MouseEnter:Connect(function()
                PlaySound(0.1, 2.8)
                CreateTween(toggleContainer, {BackgroundColor3 = Theme.SurfaceElevated}, 0.15):Play()
                CreateTween(containerStroke, {Transparency = 0.4, Thickness = 2}, 0.15):Play()
                CreateTween(toggleKnob, {Size = UDim2.new(0, 24, 0, 24)}, 0.15):Play()
                CreateParticleEffect(toggleContainer, Theme.Accent, 3)
            end)
            
            toggleButton.MouseLeave:Connect(function()
                CreateTween(toggleContainer, {BackgroundColor3 = Theme.Surface}, 0.15):Play()
                CreateTween(containerStroke, {Transparency = 0.7, Thickness = 1}, 0.15):Play()
                CreateTween(toggleKnob, {Size = UDim2.new(0, 22, 0, 22)}, 0.15):Play()
            end)
            
            table.insert(self.Elements, toggleContainer)
            self:UpdateCanvasSize()
            return toggle
        end
        
        function tab:CreateSlider(config)
            config = config or {}
            local slider = {
                Name = config.Name or "Slider",
                Min = config.Min or 0,
                Max = config.Max or 100,
                Default = config.Default or 50,
                Callback = config.Callback or function() end,
                Value = config.Default or 50
            }
            
            local sliderContainer = Instance.new("Frame")
            sliderContainer.Size = UDim2.new(1, 0, 0, 65)
            sliderContainer.BackgroundColor3 = Theme.Surface
            sliderContainer.BorderSizePixel = 0
            sliderContainer.LayoutOrder = #self.Elements + 1
            sliderContainer.ZIndex = 5
            sliderContainer.Parent = self.ContentScroll
            
            local containerCorner = Instance.new("UICorner")
            containerCorner.CornerRadius = UDim.new(0, 12)
            containerCorner.Parent = sliderContainer
            
            local containerStroke = Instance.new("UIStroke")
            containerStroke.Color = Theme.BorderAccent
            containerStroke.Thickness = 1
            containerStroke.Transparency = 0.7
            containerStroke.Parent = sliderContainer
            
            -- Slider Label
            local sliderLabel = Instance.new("TextLabel")
            sliderLabel.Size = UDim2.new(1, -100, 0, 25)
            sliderLabel.Position = UDim2.new(0, 15, 0, 8)
            sliderLabel.BackgroundTransparency = 1
            sliderLabel.Text = slider.Name
            sliderLabel.TextColor3 = Theme.Text
            sliderLabel.TextSize = 14
            sliderLabel.Font = Enum.Font.GothamSemibold
            sliderLabel.TextXAlignment = Enum.TextXAlignment.Left
            sliderLabel.TextYAlignment = Enum.TextYAlignment.Center
            sliderLabel.ZIndex = 6
            sliderLabel.Parent = sliderContainer
            
            -- Slider Value
            local sliderValue = Instance.new("TextLabel")
            sliderValue.Size = UDim2.new(0, 80, 0, 25)
            sliderValue.Position = UDim2.new(1, -90, 0, 8)
            sliderValue.BackgroundColor3 = Theme.Background
            sliderValue.BorderSizePixel = 0
            sliderValue.Text = tostring(slider.Default)
            sliderValue.TextColor3 = Theme.Accent
            sliderValue.TextSize = 12
            sliderValue.Font = Enum.Font.GothamBold
            sliderValue.TextXAlignment = Enum.TextXAlignment.Center
            sliderValue.TextYAlignment = Enum.TextYAlignment.Center
            sliderValue.ZIndex = 6
            sliderValue.Parent = sliderContainer
            
            local valueCorner = Instance.new("UICorner")
            valueCorner.CornerRadius = UDim.new(0, 8)
            valueCorner.Parent = sliderValue
            
            local valueStroke = Instance.new("UIStroke")
            valueStroke.Color = Theme.Accent
            valueStroke.Thickness = 1
            valueStroke.Transparency = 0.6
            valueStroke.Parent = sliderValue
            
            -- Slider Track
            local sliderTrack = Instance.new("Frame")
            sliderTrack.Size = UDim2.new(1, -30, 0, 8)
            sliderTrack.Position = UDim2.new(0, 15, 1, -20)
            sliderTrack.BackgroundColor3 = Theme.Border
            sliderTrack.BorderSizePixel = 0
            sliderTrack.ZIndex = 6
            sliderTrack.Parent = sliderContainer
            
            local trackCorner = Instance.new("UICorner")
            trackCorner.CornerRadius = UDim.new(0, 4)
            trackCorner.Parent = sliderTrack
            
            -- Slider Fill
            local sliderFill = Instance.new("Frame")
            sliderFill.Size = UDim2.new((slider.Default - slider.Min) / (slider.Max - slider.Min), 0, 1, 0)
            sliderFill.BackgroundColor3 = Theme.Primary
            sliderFill.BorderSizePixel = 0
            sliderFill.ZIndex = 7
            sliderFill.Parent = sliderTrack
            
            local fillCorner = Instance.new("UICorner")
            fillCorner.CornerRadius = UDim.new(0, 4)
            fillCorner.Parent = sliderFill
            
            local fillGradient = CreateGradient(sliderFill, {
                ColorSequenceKeypoint.new(0, Theme.Primary),
                ColorSequenceKeypoint.new(0.5, Theme.Accent),
                ColorSequenceKeypoint.new(1, Theme.Secondary)
            }, 0)
            
            -- Slider Knob
            local sliderKnob = Instance.new("Frame")
            sliderKnob.Size = UDim2.new(0, 20, 0, 20)
            sliderKnob.Position = UDim2.new((slider.Default - slider.Min) / (slider.Max - slider.Min), -10, 0.5, -10)
            sliderKnob.BackgroundColor3 = Theme.Text
            sliderKnob.BorderSizePixel = 0
            sliderKnob.ZIndex = 8
            sliderKnob.Parent = sliderTrack
            
            local knobCorner = Instance.new("UICorner")
            knobCorner.CornerRadius = UDim.new(0, 10)
            knobCorner.Parent = sliderKnob
            
            local knobStroke = Instance.new("UIStroke")
            knobStroke.Color = Theme.Accent
            knobStroke.Thickness = 2
            knobStroke.Transparency = 0.3
            knobStroke.Parent = sliderKnob
            
            local dragging = false
            
            local function updateSlider(input)
                local relativeX = math.clamp((input.Position.X - sliderTrack.AbsolutePosition.X) / sliderTrack.AbsoluteSize.X, 0, 1)
                local newValue = math.round(slider.Min + (slider.Max - slider.Min) * relativeX)
                
                if newValue ~= slider.Value then
                    slider.Value = newValue
                    sliderValue.Text = tostring(newValue)
                    
                    CreateTween(sliderFill, {Size = UDim2.new(relativeX, 0, 1, 0)}, 0.1):Play()
                    CreateTween(sliderKnob, {Position = UDim2.new(relativeX, -10, 0.5, -10)}, 0.1, Enum.EasingStyle.Back):Play()
                    
                    CreateTween(sliderValue, {TextColor3 = Theme.Gold, TextSize = 14}, 0.1):Play()
                    wait(0.1)
                    CreateTween(sliderValue, {TextColor3 = Theme.Accent, TextSize = 12}, 0.1):Play()
                    
                    CreateParticleEffect(sliderKnob, Theme.Accent, 2)
                    slider.Callback(newValue)
                end
            end
            
            sliderTrack.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = true
                    PlaySound(0.3, 1.8)
                    CreateTween(sliderKnob, {Size = UDim2.new(0, 24, 0, 24)}, 0.15):Play()
                    updateSlider(input)
                end
            end)
            
            UserInputService.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    updateSlider(input)
                end
            end)
            
            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = false
                    CreateTween(sliderKnob, {Size = UDim2.new(0, 20, 0, 20)}, 0.15, Enum.EasingStyle.Back):Play()
                end
            end)
            
            -- Hover effects
            sliderContainer.MouseEnter:Connect(function()
                PlaySound(0.1, 2.5)
                CreateTween(sliderContainer, {BackgroundColor3 = Theme.SurfaceElevated}, 0.15):Play()
                CreateTween(containerStroke, {Transparency = 0.4, Thickness = 2}, 0.15):Play()
                CreateTween(sliderKnob, {Size = UDim2.new(0, 22, 0, 22)}, 0.15):Play()
            end)
            
            sliderContainer.MouseLeave:Connect(function()
                if not dragging then
                    CreateTween(sliderContainer, {BackgroundColor3 = Theme.Surface}, 0.15):Play()
                    CreateTween(containerStroke, {Transparency = 0.7, Thickness = 1}, 0.15):Play()
                    CreateTween(sliderKnob, {Size = UDim2.new(0, 20, 0, 20)}, 0.15):Play()
                end
            end)
            
            table.insert(self.Elements, sliderContainer)
            self:UpdateCanvasSize()
            return slider
        end
        
        function tab:CreateButton(config)
            config = config or {}
            local button = {
                Name = config.Name or "Button",
                Callback = config.Callback or function() end
            }
            
            local buttonContainer = Instance.new("TextButton")
            buttonContainer.Size = UDim2.new(1, 0, 0, 45)
            buttonContainer.BackgroundColor3 = Theme.Primary
            buttonContainer.BorderSizePixel = 0
            buttonContainer.Text = ""
            buttonContainer.LayoutOrder = #self.Elements + 1
            buttonContainer.ZIndex = 5
            buttonContainer.Parent = self.ContentScroll
            
            local containerCorner = Instance.new("UICorner")
            containerCorner.CornerRadius = UDim.new(0, 12)
            containerCorner.Parent = buttonContainer
            
            local containerStroke = Instance.new("UIStroke")
            containerStroke.Color = Theme.Accent
            containerStroke.Thickness = 1
            containerStroke.Transparency = 0.5
            containerStroke.Parent = buttonContainer
            
            local buttonGradient = CreateGradient(buttonContainer, {
                ColorSequenceKeypoint.new(0, Theme.Primary),
                ColorSequenceKeypoint.new(0.5, Theme.Secondary),
                ColorSequenceKeypoint.new(1, Theme.Accent)
            }, 45)
            
            local buttonText = Instance.new("TextLabel")
            buttonText.Size = UDim2.new(1, 0, 1, 0)
            buttonText.BackgroundTransparency = 1
            buttonText.Text = button.Name
            buttonText.TextColor3 = Theme.Text
            buttonText.TextSize = 14
            buttonText.Font = Enum.Font.GothamBold
            buttonText.TextXAlignment = Enum.TextXAlignment.Center
            buttonText.TextYAlignment = Enum.TextYAlignment.Center
            buttonText.ZIndex = 6
            buttonText.Parent = buttonContainer
            
            -- Button click
            buttonContainer.MouseButton1Click:Connect(function()
                PlaySound(0.6, 1.2)
                UltraRippleEffect(buttonContainer, Theme.Gold)
                CreateParticleEffect(buttonContainer, Theme.Gold, 12)
                
                CreateTween(buttonContainer, {
                    Size = UDim2.new(1, 0, 0, 42),
                    BackgroundColor3 = Theme.Gold
                }, 0.15):Play()
                
                CreateTween(buttonText, {
                    TextSize = 16,
                    TextColor3 = Theme.Background
                }, 0.15):Play()
                
                wait(0.15)
                
                CreateTween(buttonContainer, {
                    Size = UDim2.new(1, 0, 0, 45),
                    BackgroundColor3 = Theme.Primary
                }, 0.15, Enum.EasingStyle.Back):Play()
                
                CreateTween(buttonText, {
                    TextSize = 14,
                    TextColor3 = Theme.Text
                }, 0.15):Play()
                
                button.Callback()
            end)
            
            -- Hover effects
            buttonContainer.MouseEnter:Connect(function()
                PlaySound(0.2, 2.2)
                CreateTween(buttonContainer, {
                    Size = UDim2.new(1, 0, 0, 48),
                    BackgroundColor3 = Theme.Secondary
                }, 0.15, Enum.EasingStyle.Back):Play()
                CreateTween(containerStroke, {Transparency = 0.2, Thickness = 2}, 0.15):Play()
                CreateTween(buttonText, {TextSize = 15}, 0.15):Play()
                CreateParticleEffect(buttonContainer, Theme.Accent, 5)
            end)
            
            buttonContainer.MouseLeave:Connect(function()
                CreateTween(buttonContainer, {
                    Size = UDim2.new(1, 0, 0, 45),
                    BackgroundColor3 = Theme.Primary
                }, 0.15, Enum.EasingStyle.Back):Play()
                CreateTween(containerStroke, {Transparency = 0.5, Thickness = 1}, 0.15):Play()
                CreateTween(buttonText, {TextSize = 14}, 0.15):Play()
            end)
            
            table.insert(self.Elements, buttonContainer)
            self:UpdateCanvasSize()
            return button
        end
        
        table.insert(self.Tabs, tab)
        
        -- Auto-select first tab
        if #self.Tabs == 1 then
            self:SelectTab(tab)
        end
        
        return tab
    end
    
    -- Create Settings Tab
    spawn(function()
        wait(0.1)
        local settingsTab = window:CreateTab({
            Name = "Settings",
            Icon = "⚙️"
        })
        
        settingsTab:CreateSection("🎮 Control Settings")
        
        -- Enhanced key binding
        local keyBindFrame = Instance.new("Frame")
        keyBindFrame.Size = UDim2.new(1, 0, 0, 60)
        keyBindFrame.BackgroundColor3 = Theme.Surface
        keyBindFrame.BorderSizePixel = 0
        keyBindFrame.LayoutOrder = #settingsTab.Elements + 1
        keyBindFrame.ZIndex = 5
        keyBindFrame.Parent = settingsTab.ContentScroll
        
        local keyBindCorner = Instance.new("UICorner")
        keyBindCorner.CornerRadius = UDim.new(0, 12)
        keyBindCorner.Parent = keyBindFrame
        
        local keyBindStroke = Instance.new("UIStroke")
        keyBindStroke.Color = Theme.BorderAccent
        keyBindStroke.Thickness = 1
        keyBindStroke.Transparency = 0.7
        keyBindStroke.Parent = keyBindFrame
        
        local keyBindLabel = Instance.new("TextLabel")
        keyBindLabel.Size = UDim2.new(1, -140, 1, 0)
        keyBindLabel.Position = UDim2.new(0, 15, 0, 0)
        keyBindLabel.BackgroundTransparency = 1
        keyBindLabel.Text = "🎯 Toggle Key"
        keyBindLabel.TextColor3 = Theme.Text
        keyBindLabel.TextSize = 14
        keyBindLabel.Font = Enum.Font.GothamSemibold
        keyBindLabel.TextXAlignment = Enum.TextXAlignment.Left
        keyBindLabel.TextYAlignment = Enum.TextYAlignment.Center
        keyBindLabel.ZIndex = 6
        keyBindLabel.Parent = keyBindFrame
        
        local keySelectButton = Instance.new("TextButton")
        keySelectButton.Size = UDim2.new(0, 120, 0, 35)
        keySelectButton.Position = UDim2.new(1, -130, 0.5, -17.5)
        keySelectButton.BackgroundColor3 = Theme.Primary
        keySelectButton.BorderSizePixel = 0
        keySelectButton.Text = KeyNames[Settings.ToggleKey] or "Insert"
        keySelectButton.TextColor3 = Theme.Text
        keySelectButton.TextSize = 12
        keySelectButton.Font = Enum.Font.GothamBold
        keySelectButton.ZIndex = 6
        keySelectButton.Parent = keyBindFrame
        
        local keyButtonCorner = Instance.new("UICorner")
        keyButtonCorner.CornerRadius = UDim.new(0, 8)
        keyButtonCorner.Parent = keySelectButton
        
        local keyButtonGradient = CreateGradient(keySelectButton, {
            ColorSequenceKeypoint.new(0, Theme.Primary),
            ColorSequenceKeypoint.new(1, Theme.Secondary)
        }, 45)
        
        local waitingForKey = false
        keySelectButton.MouseButton1Click:Connect(function()
            if not waitingForKey then
                waitingForKey = true
                keySelectButton.Text = "Press Key..."
                UltraRippleEffect(keySelectButton, Theme.Gold)
                
                local connection
                connection = UserInputService.InputBegan:Connect(function(input, processed)
                    if not processed and input.UserInputType == Enum.UserInputType.Keyboard then
                        local keyCode = input.KeyCode
                        if KeyNames[keyCode] then
                            Settings.ToggleKey = keyCode
                            keySelectButton.Text = KeyNames[keyCode]
                            waitingForKey = false
                            connection:Disconnect()
                            PlaySound(0.5, 1.8)
                            CreateParticleEffect(keySelectButton, Theme.Success, 8)
                        end
                    end
                end)
                
                spawn(function()
                    wait(5)
                    if waitingForKey then
                        waitingForKey = false
                        keySelectButton.Text = KeyNames[Settings.ToggleKey] or "Insert"
                        connection:Disconnect()
                    end
                end)
            end
        end)
        
        -- Settings toggles
        settingsTab:CreateToggle({
            Name = "🌟 Show Float Button",
            Default = Settings.FloatButtonEnabled,
            Callback = function(value)
                Settings.FloatButtonEnabled = value
                if window.FloatButton then
                    if window.ScreenGui.Enabled then
                        window.FloatButton.Visible = false
                    else
                        window.FloatButton.Visible = value
                    end
                end
            end
        })
        
        settingsTab:CreateToggle({
            Name = "🔊 Sound Effects",
            Default = Settings.SoundEnabled,
            Callback = function(value)
                Settings.SoundEnabled = value
            end
        })
        
        settingsTab:CreateToggle({
            Name = "✨ Particle Effects",
            Default = Settings.ParticleEffects,
            Callback = function(value)
                Settings.ParticleEffects = value
            end
        })
        
        settingsTab:CreateToggle({
            Name = "💫 Glow Effects",
            Default = Settings.GlowEffects,
            Callback = function(value)
                Settings.GlowEffects = value
            end
        })
        
        settingsTab:CreateSection("🎨 Visual Settings")
        
        settingsTab:CreateSlider({
            Name = "🎭 Float Button Size",
            Min = 40,
            Max = 80,
            Default = 60,
            Callback = function(value)
                Settings.FloatButtonSize = value
                if window.FloatButton then
                    CreateTween(window.FloatButton, {
                        Size = UDim2.new(0, value, 0, value)
                    }, 0.3):Play()
                end
            end
        })
        
        table.insert(settingsTab.Elements, keyBindFrame)
        settingsTab:UpdateCanvasSize()
    end)
    
    return window
end

return Library-- Ultra Premium GUI Library v3.0 - Fixed Version -----
local Library = {}
Library.__index = Library

-- Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local SoundService = game:GetService("SoundService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Ultra Premium Theme
local Theme = {
    Background = Color3.fromRGB(12, 15, 25),
    Surface = Color3.fromRGB(18, 22, 35),
    SurfaceElevated = Color3.fromRGB(25, 30, 45),
    Primary = Color3.fromRGB(139, 69, 255),
    Secondary = Color3.fromRGB(255, 69, 139),
    Accent = Color3.fromRGB(0, 255, 195),
    Gold = Color3.fromRGB(255, 215, 0),
    Text = Color3.fromRGB(255, 255, 255),
    TextDim = Color3.fromRGB(180, 185, 200),
    Success = Color3.fromRGB(72, 187, 120),
    Warning = Color3.fromRGB(245, 166, 35),
    Error = Color3.fromRGB(248, 113, 113),
    Border = Color3.fromRGB(45, 50, 65),
    BorderAccent = Color3.fromRGB(75, 85, 110),
    Hover = Color3.fromRGB(30, 35, 50),
}

-- Settings
local Settings = {
    ToggleKey = Enum.KeyCode.Insert,
    FloatButtonEnabled = true,
    FloatButtonPosition = {0.95, 0.1},
    FloatButtonSize = 60,
    SoundEnabled = true,
    ParticleEffects = true,
    GlowEffects = true
}

-- Key Names
local KeyNames = {
    [Enum.KeyCode.Insert] = "Insert", [Enum.KeyCode.Home] = "Home", [Enum.KeyCode.End] = "End",
    [Enum.KeyCode.F1] = "F1", [Enum.KeyCode.F2] = "F2", [Enum.KeyCode.F3] = "F3", [Enum.KeyCode.F4] = "F4",
    [Enum.KeyCode.F5] = "F5", [Enum.KeyCode.F6] = "F6", [Enum.KeyCode.F7] = "F7", [Enum.KeyCode.F8] = "F8",
    [Enum.KeyCode.Tab] = "Tab", [Enum.KeyCode.Minus] = "-", [Enum.KeyCode.Equals] = "="
}

-- Utility Functions
local function CreateTween(object, properties, duration, style)
    duration = duration or 0.3
    style = style or Enum.EasingStyle.Quad
    return TweenService:Create(object, TweenInfo.new(duration, style, Enum.EasingDirection.Out), properties)
end

local function CreateGradient(parent, colors, rotation)
    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new(colors)
    gradient.Rotation = rotation or 0
    gradient.Parent = parent
    return gradient
end

local function PlaySound(volume, pitch)
    if not Settings.SoundEnabled then return end
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxasset://sounds/electronicpingshort.wav"
    sound.Volume = volume or 0.5
    sound.Pitch = pitch or 1
    sound.Parent = SoundService
    sound:Play()
    spawn(function()
        wait(2)
        sound:Destroy()
    end)
end

local function UltraRippleEffect(button, color)
    PlaySound(0.3, 1.2)
    
    for i = 1, 2 do
        spawn(function()
            wait((i-1) * 0.1)
            
            local ripple = Instance.new("Frame")
            ripple.Size = UDim2.new(0, 0, 0, 0)
            ripple.Position = UDim2.new(0.5, 0, 0.5, 0)
            ripple.AnchorPoint = Vector2.new(0.5, 0.5)
            ripple.BackgroundColor3 = color or Theme.Accent
            ripple.BackgroundTransparency = 0.3
            ripple.BorderSizePixel = 0
            ripple.ZIndex = button.ZIndex + 10
            ripple.Parent = button
            
            local rippleCorner = Instance.new("UICorner")
            rippleCorner.CornerRadius = UDim.new(1, 0)
            rippleCorner.Parent = ripple
            
            local maxSize = math.max(button.AbsoluteSize.X, button.AbsoluteSize.Y) * 2.5
            local expandTween = CreateTween(ripple, {
                Size = UDim2.new(0, maxSize, 0, maxSize),
                BackgroundTransparency = 1
            }, 0.6, Enum.EasingStyle.Exponential)
            
            expandTween:Play()
            expandTween.Completed:Connect(function()
                ripple:Destroy()
            end)
        end)
    end
end

local function CreateParticleEffect(parent, color, count)
    if not Settings.ParticleEffects then return end
    
    for i = 1, count or 5 do
        spawn(function()
            wait(math.random() * 0.3)
            
            local particle = Instance.new("Frame")
            particle.Size = UDim2.new(0, math.random(2, 4), 0, math.random(2, 4))
            particle.Position = UDim2.new(math.random(), 0, math.random(), 0)
            particle.BackgroundColor3 = color or Theme.Accent
            particle.BackgroundTransparency = 0.5
            particle.BorderSizePixel = 0
            particle.ZIndex = parent.ZIndex + 5
            particle.Parent = parent
            
            local particleCorner = Instance.new("UICorner")
            particleCorner.CornerRadius = UDim.new(1, 0)
            particleCorner.Parent = particle
            
            local floatTween = CreateTween(particle, {
                Position = UDim2.new(math.random(), 0, -0.2, 0),
                BackgroundTransparency = 1,
                Rotation = math.random(-180, 180)
            }, math.random(1, 2), Enum.EasingStyle.Exponential)
            
            floatTween:Play()
            floatTween.Completed:Connect(function()
                particle:Destroy()
            end)
        end)
    end
end

-- Ultra Premium Float Button
local function CreateUltraPremiumFloatButton(window)
    local floatGui = Instance.new("ScreenGui")
    floatGui.Name = "UltraPremiumFloat_" .. math.random(1000, 9999)
    floatGui.Parent = playerGui
    floatGui.ResetOnSpawn = false
    floatGui.IgnoreGuiInset = true
    floatGui.DisplayOrder = 1000
    
    local floatButton = Instance.new("TextButton")
    floatButton.Name = "FloatButton"
    floatButton.Size = UDim2.new(0, Settings.FloatButtonSize, 0, Settings.FloatButtonSize)
    floatButton.Position = UDim2.new(Settings.FloatButtonPosition[1], -Settings.FloatButtonSize/2, Settings.FloatButtonPosition[2], -Settings.FloatButtonSize/2)
    floatButton.BackgroundColor3 = Theme.Background
    floatButton.BackgroundTransparency = 0.1
    floatButton.BorderSizePixel = 0
    floatButton.Text = ""
    floatButton.ZIndex = 10
    floatButton.Parent = floatGui
    
    local floatCorner = Instance.new("UICorner")
    floatCorner.CornerRadius = UDim.new(1, 0)
    floatCorner.Parent = floatButton
    
    local floatGradient = CreateGradient(floatButton, {
        ColorSequenceKeypoint.new(0, Theme.Primary),
        ColorSequenceKeypoint.new(0.5, Theme.Secondary),
        ColorSequenceKeypoint.new(1, Theme.Accent)
    }, 45)
    
    local outerStroke = Instance.new("UIStroke")
    outerStroke.Color = Theme.Accent
    outerStroke.Thickness = 3
    outerStroke.Transparency = 0.3
    outerStroke.Parent = floatButton
    
    local iconContainer = Instance.new("Frame")
    iconContainer.Size = UDim2.new(0.6, 0, 0.6, 0)
    iconContainer.Position = UDim2.new(0.2, 0, 0.2, 0)
    iconContainer.BackgroundTransparency = 1
    iconContainer.ZIndex = 11
    iconContainer.Parent = floatButton
    
    local icon = Instance.new("TextLabel")
    icon.Size = UDim2.new(1, 0, 1, 0)
    icon.BackgroundTransparency = 1
    icon.Text = "⚡"
    icon.TextColor3 = Theme.Text
    icon.TextSize = Settings.FloatButtonSize * 0.4
    icon.Font = Enum.Font.GothamBold
    icon.TextXAlignment = Enum.TextXAlignment.Center
    icon.TextYAlignment = Enum.TextYAlignment.Center
    icon.ZIndex = 12
    icon.Parent = iconContainer
    
    -- Breathing animation
    local function startBreathing()
        local breathe1 = CreateTween(floatButton, {
            Size = UDim2.new(0, Settings.FloatButtonSize + 8, 0, Settings.FloatButtonSize + 8)
        }, 2, Enum.EasingStyle.Sine)
        
        breathe1:Play()
        breathe1.Completed:Connect(function()
            local breathe2 = CreateTween(floatButton, {
                Size = UDim2.new(0, Settings.FloatButtonSize, 0, Settings.FloatButtonSize)
            }, 2, Enum.EasingStyle.Sine)
            
            breathe2:Play()
            breathe2.Completed:Connect(function()
                if floatButton.Parent then
                    startBreathing()
                end
            end)
        end)
    end
    startBreathing()
    
    -- Hover effects
    floatButton.MouseEnter:Connect(function()
        PlaySound(0.2, 1.5)
        CreateTween(floatButton, {
            Size = UDim2.new(0, Settings.FloatButtonSize + 15, 0, Settings.FloatButtonSize + 15)
        }, 0.15, Enum.EasingStyle.Back):Play()
        CreateTween(outerStroke, {Transparency = 0.1, Thickness = 5}, 0.15):Play()
        CreateParticleEffect(floatButton, Theme.Accent, 6)
    end)
    
    floatButton.MouseLeave:Connect(function()
        CreateTween(floatButton, {
            Size = UDim2.new(0, Settings.FloatButtonSize, 0, Settings.FloatButtonSize)
        }, 0.15, Enum.EasingStyle.Back):Play()
        CreateTween(outerStroke, {Transparency = 0.3, Thickness = 3}, 0.15):Play()
    end)
    
    floatButton.MouseButton1Click:Connect(function()
        UltraRippleEffect(floatButton, Theme.Gold)
        CreateTween(iconContainer, {Rotation = iconContainer.Rotation + 360}, 0.5, Enum.EasingStyle.Back):Play()
        window.ScreenGui.Enabled = not window.ScreenGui.Enabled
    end)
    
    -- Dragging
    local floatDragging = false
    local floatDragStart = nil
    local floatStartPos = nil
    
    floatButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            floatDragging = true
            floatDragStart = input.Position
            floatStartPos = floatButton.Position
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and floatDragging then
            local delta = input.Position - floatDragStart
            floatButton.Position = UDim2.new(0, floatStartPos.X.Offset + delta.X, 0, floatStartPos.Y.Offset + delta.Y)
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            floatDragging = false
        end
    end)
    
    window.FloatGui = floatGui
    window.FloatButton = floatButton
    
    -- Visibility management
    local function updateFloatButtonVisibility()
        if window.ScreenGui.Enabled then
            floatButton.Visible = false
        else
            floatButton.Visible = Settings.FloatButtonEnabled
        end
    end
    
    window.ScreenGui:GetPropertyChangedSignal("Enabled"):Connect(updateFloatButtonVisibility)
    updateFloatButtonVisibility()
end

-- Main Library Function
function Library:CreateWindow(config)
    config = config or {}
    local window = {
        Title = config.Title or "Ultra Premium GUI",
        Size = config.Size or {800, 600},
        Tabs = {},
        CurrentTab = nil
    }
    
    -- Create ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "UltraPremiumGUI_" .. math.random(1000, 9999)
    screenGui.Parent = playerGui
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.DisplayOrder = 999
    
    -- Background
    local backgroundBlur = Instance.new("Frame")
    backgroundBlur.Size = UDim2.new(1, 0, 1, 0)
    backgroundBlur.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    backgroundBlur.BackgroundTransparency = 0.2
    backgroundBlur.BorderSizePixel = 0
    backgroundBlur.ZIndex = 1
    backgroundBlur.Parent = screenGui
    
    -- Main Container
    local mainContainer = Instance.new("Frame")
    mainContainer.Size = UDim2.new(0, window.Size[1], 0, window.Size[2])
    mainContainer.Position = UDim2.new(0.5, -window.Size[1]/2, 0.5, -window.Size[2]/2)
    mainContainer.BackgroundColor3 = Theme.Background
    mainContainer.BorderSizePixel = 0
    mainContainer.ZIndex = 2
    mainContainer.Parent = screenGui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 20)
    mainCorner.Parent = mainContainer
    
    local mainStroke = Instance.new("UIStroke")
    mainStroke.Thickness = 2
    mainStroke.Transparency = 0.5
    mainStroke.Parent = mainContainer
    
    local borderGradient = CreateGradient(mainStroke, {
        ColorSequenceKeypoint.new(0, Theme.Primary),
        ColorSequenceKeypoint.new(0.5, Theme.Accent),
        ColorSequenceKeypoint.new(1, Theme.Secondary)
    }, 0)
    
    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, 60)
    titleBar.BackgroundColor3 = Theme.Surface
    titleBar.BorderSizePixel = 0
    titleBar.ZIndex = 3
    titleBar.Parent = mainContainer
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 20)
    titleCorner.Parent = titleBar
    
    local titleGradient = CreateGradient(titleBar, {
        ColorSequenceKeypoint.new(0, Theme.Primary),
        ColorSequenceKeypoint.new(0.5, Theme.Background),
        ColorSequenceKeypoint.new(1, Theme.Secondary)
    }, 90)
    
    -- Logo
    local logoContainer = Instance.new("Frame")
    logoContainer.Size = UDim2.new(0, 40, 0, 40)
    logoContainer.Position = UDim2.new(0, 15, 0, 10)
    logoContainer.BackgroundColor3 = Theme.Accent
    logoContainer.BorderSizePixel = 0
    logoContainer.ZIndex = 4
    logoContainer.Parent = titleBar
    
    local logoCorner = Instance.new("UICorner")
    logoCorner.CornerRadius = UDim.new(0, 8)
    logoCorner.Parent = logoContainer
    
    local logoGradient = CreateGradient(logoContainer, {
        ColorSequenceKeypoint.new(0, Theme.Gold),
        ColorSequenceKeypoint.new(1, Theme.Accent)
    }, 45)
    
    local logo = Instance.new("TextLabel")
    logo.Size = UDim2.new(1, 0, 1, 0)
    logo.BackgroundTransparency = 1
    logo.Text = "⚡"
    logo.TextColor3 = Theme.Text
    logo.TextSize = 20
    logo.Font = Enum.Font.GothamBold
    logo.TextXAlignment = Enum.TextXAlignment.Center
    logo.TextYAlignment = Enum.TextYAlignment.Center
    logo.ZIndex = 5
    logo.Parent = logoContainer
    
    -- Title Text
    local titleText = Instance.new("TextLabel")
    titleText.Size = UDim2.new(1, -200, 1, 0)
    titleText.Position = UDim2.new(0, 65, 0, 0)
    titleText.BackgroundTransparency = 1
    titleText.Text = window.Title
    titleText.TextColor3 = Theme.Text
    titleText.TextSize = 20
    titleText.Font = Enum.Font.GothamBold
    titleText.TextXAlignment = Enum.TextXAlignment.Left
    titleText.TextYAlignment = Enum.TextYAlignment.Center
    titleText.ZIndex = 4
    titleText.Parent = titleBar
    
    -- Control Buttons
    local controlsContainer = Instance.new("Frame")
    controlsContainer.Size = UDim2.new(0, 150, 0, 40)
    controlsContainer.Position = UDim2.new(1, -160, 0, 10)
    controlsContainer.BackgroundTransparency = 1
    controlsContainer.ZIndex = 4
    controlsContainer.Parent = titleBar
    
    local controlsLayout = Instance.new("UIListLayout")
    controlsLayout.FillDirection = Enum.FillDirection.Horizontal
    controlsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right
    controlsLayout.Padding = UDim.new(0, 8)
    controlsLayout.Parent = controlsContainer
    
    local function createControlButton(icon, color, callback)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0, 35, 0, 35)
        button.BackgroundColor3 = color
        button.BorderSizePixel = 0
        button.Text = icon
        button.TextColor3 = Theme.Text
        button.TextSize = 14
        button.Font = Enum.Font.GothamBold
        button.ZIndex = 5
        button.Parent = controlsContainer
        
        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0, 8)
        buttonCorner.Parent = button
        
        button.MouseEnter:Connect(function()
            PlaySound(0.1, 2)
            CreateTween(button, {Size = UDim2.new(0, 38, 0, 38)}, 0.15, Enum.EasingStyle.Back):Play()
            CreateParticleEffect(button, color, 3)
        end)
        
        button.MouseLeave:Connect(function()
            CreateTween(button, {Size = UDim2.new(0, 35, 0, 35)}, 0.15, Enum.EasingStyle.Back):Play()
        end)
        
        button.MouseButton1Click:Connect(function()
            UltraRippleEffect(button, Theme.Gold)
            callback()
        end)
        
        return button
    end
    
    local closeButton = createControlButton("✕", Theme.Error, function()
        CreateParticleEffect(mainContainer, Theme.Error, 15)
        PlaySound(0.8, 0.5)
        local closeTween = CreateTween(mainContainer, {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0),
            Rotation = 360
        }, 0.8, Enum.EasingStyle.Back)
        CreateTween(backgroundBlur, {BackgroundTransparency = 1}, 0.8):Play()
        closeTween:Play()
        closeTween.Completed:Connect(function()
            screenGui:Destroy()
            if window.FloatGui then
                window.FloatGui:Destroy()
            end
        end)
    end)
    
    -- Sidebar
    local sidebarContainer = Instance.new("Frame")
    sidebarContainer.Size = UDim2.new(0, 180, 1, -75)
    sidebarContainer.Position = UDim2.new(0, 15, 0, 70)
    sidebarContainer.BackgroundColor3 = Theme.Surface
    sidebarContainer.BorderSizePixel = 0
    sidebarContainer.ZIndex = 3
    sidebarContainer.Parent = mainContainer
    
    local sidebarCorner = Instance.new("UICorner")
    sidebarCorner.CornerRadius = UDim.new(0, 15)
    sidebarCorner.Parent = sidebarContainer
    
    local sidebarStroke = Instance.new("UIStroke")
    sidebarStroke.Color = Theme.BorderAccent
    sidebarStroke.Thickness = 1
    sidebarStroke.Transparency = 0.6
    sidebarStroke.Parent = sidebarContainer
    
    local tabNavigation = Instance.new("ScrollingFrame")
    tabNavigation.Size = UDim2.new(1, -20, 1, -20)
    tabNavigation.Position = UDim2.new(0, 10, 0, 10)
    tabNavigation.BackgroundTransparency = 1
    tabNavigation.BorderSizePixel = 0
    tabNavigation.ScrollBarThickness = 4
    tabNavigation.ScrollBarImageColor3 = Theme.Accent
    tabNavigation.ScrollBarImageTransparency = 0.7
    tabNavigation.ZIndex = 4
    tabNavigation.Parent = sidebarContainer
    
    local tabLayout = Instance.new("UIListLayout")
    tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabLayout.Padding = UDim.new(0, 8)
    tabLayout.Parent = tabNavigation
    
    local tabPadding = Instance.new("UIPadding")
    tabPadding.PaddingTop = UDim.new(0, 10)
    tabPadding.PaddingLeft = UDim.new(0, 5)
    tabPadding.PaddingRight = UDim.new(0, 5)
    tabPadding.PaddingBottom = UDim.new(0, 10)
    tabPadding.Parent = tabNavigation
    
    -- Content Area
    local contentArea = Instance.new("Frame")
    contentArea.Size = UDim2.new(1, -220, 1, -75)
    contentArea.Position = UDim2.new(0, 205, 0, 70)
    contentArea.BackgroundColor3 = Theme.SurfaceElevated
    contentArea.BorderSizePixel = 0
    contentArea.ZIndex = 3
    contentArea.Parent = mainContainer
    
    local contentCorner = Instance.new("UICorner")
    contentCorner.CornerRadius = UDim.new(0, 15)
    contentCorner.Parent = contentArea
    
    local contentStroke = Instance.new("UIStroke")
    contentStroke.Color = Theme.BorderAccent
    contentStroke.Thickness = 1
    contentStroke.Transparency = 0.6
    contentStroke.Parent = contentArea
    
    -- Store references
    window.ScreenGui = screenGui
    window.MainContainer = mainContainer
    window.TabNavigation = tabNavigation
    window.ContentArea = contentArea
    
    -- Create Float Button
    CreateUltraPremiumFloatButton(window)
    
    -- Dragging
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = mainContainer.Position
            PlaySound(0.1, 1.8)
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
            local delta = input.Position - dragStart
            mainContainer.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    -- Toggle functionality
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if not gameProcessed and input.KeyCode == Settings.ToggleKey then
            if screenGui.Enabled then
                CreateTween(mainContainer, {
                    Size = UDim2.new(0, 0, 0, 0),
                    Position = UDim2.new(0.5, 0, 0.5, 0),
                    Rotation = -90
                }, 0.3, Enum.EasingStyle.Back):Play()
                CreateTween(backgroundBlur, {BackgroundTransparency = 1}, 0.3):Play()
                wait(0.3)
                screenGui.Enabled = false
            else
                screenGui.Enabled = true
                mainContainer.Size = UDim2.new(0, 0, 0, 0)
                mainContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
                mainContainer.Rotation = 90
                CreateTween(backgroundBlur, {BackgroundTransparency = 0.2}, 0.3):Play()
                CreateTween(mainContainer, {
                    Size = UDim2.new(0, window.Size[1], 0, window.Size[2]),
                    Position = UDim2.new(0.5, -window.Size[1]/2, 0.5, -window.Size[2]/2),
                    Rotation = 0
                }, 0.3, Enum.EasingStyle.Back):Play()
                CreateParticleEffect(mainContainer, Theme.Accent, 15)
            end
        end
    end)
    
    -- Window methods
    function window:SelectTab(tab)
        if self.CurrentTab then
            CreateTween(self.CurrentTab.TabButton, {BackgroundColor3 = Theme.Background}, 0.15):Play()
            CreateTween(self.CurrentTab.TabText, {TextColor3 = Theme.TextDim}, 0.15):Play()
            CreateTween(self.CurrentTab.TabIndicator, {Size = UDim2.new(0, 4, 0, 0)}, 0.15):Play()
            self.CurrentTab.ContentScroll.Visible = false
        end
        
        self.CurrentTab = tab
        PlaySound(0.3, 1.3)
        CreateTween(tab.TabButton, {BackgroundColor3 = Theme.Primary}, 0.15, Enum.EasingStyle.Back):Play()
        CreateTween(tab.TabText, {TextColor3 = Theme.Text}, 0.15):Play()
        CreateTween(tab.TabIndicator, {Size = UDim2.new(0, 4, 0, 35)}, 0.15, Enum.EasingStyle.Back):Play()
        tab.ContentScroll.Visible = true
        CreateParticleEffect(tab.TabButton, Theme.Accent, 6)
    end
    
    function window:CreateTab(config)
        config = config or {}
        local tab = {
            Name = config.Name or "Tab",
            Icon = config.Icon or "📁",
            Elements = {}
        }
        
        -- Tab Button
        local tabButton = Instance.new("TextButton")
        tabButton.Size = UDim2.new(1, 0, 0, 45)
        tabButton.BackgroundColor3 = Theme.Background
        tabButton.BorderSizePixel = 0
        tabButton.Text = ""
        tabButton.LayoutOrder = #self.Tabs + 1
        tabButton.ZIndex = 5
        tabButton.Parent = self.TabNavigation
        
        local tabCorner = Instance.new("UICorner")
        tabCorner.CornerRadius = UDim.new(0, 12)
        tabCorner.Parent = tabButton
        
        local tabStroke = Instance.new("UIStroke")
        tabStroke.Color = Theme.Border
        tabStroke.Thickness = 1
        tabStroke.Transparency = 0.8
        tabStroke.Parent = tabButton
        
        -- Tab Icon
        local tabIcon = Instance.new("TextLabel")
        tabIcon.Size = UDim
